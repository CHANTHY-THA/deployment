"use strict";(self.webpackChunkmaterial_dashboard_pro_angular=self.webpackChunkmaterial_dashboard_pro_angular||[]).push([[960],{43960:function(t,e,o){o.r(e),o.d(e,{CustomerModule:function(){return Tt}});var r=o(38583),i=o(39895),n=o(3679),s=o(90670),a=o(47361),u=o(41335),c=o(32789),m=o(40355),l=o(84934),d=o(23235),g=o(61176),p=o(34958),h=o(37716),f=o(72541),Z=o(77001),y=o(22238),C=o(51095),T=o(33935),b=o(76627),A=o(98295),q=o(83166),_=o(99692),v=o(72458);const N=["tblCustomer"];function x(t,e){if(1&t){const t=h.EpF();h.TgZ(0,"button",34),h.NdJ("click",function(){h.CHM(t);const e=h.oxw();return e.refreshData(e.refresh)})("click",function(){return h.CHM(t),h.oxw().criterial=""}),h.TgZ(1,"mat-icon"),h._uU(2,"close"),h.qZA(),h.qZA()}}function I(t,e){if(1&t){const t=h.EpF();h.TgZ(0,"button",35),h.NdJ("click",function(){return h.CHM(t),h.oxw().getCustomers()}),h.TgZ(1,"mat-icon"),h._uU(2,"search"),h.qZA(),h.qZA()}}function w(t,e){1&t&&(h.TgZ(0,"th",36),h._uU(1," Customer "),h.qZA())}function D(t,e){if(1&t&&(h.TgZ(0,"td",37),h._uU(1),h.qZA()),2&t){const t=e.$implicit;h.xp6(1),h.hij(" ",t.name," ")}}function F(t,e){1&t&&(h.TgZ(0,"th",36),h._uU(1," Phone1 "),h.qZA())}function M(t,e){if(1&t&&(h.TgZ(0,"td",37),h._uU(1),h.qZA()),2&t){const t=e.$implicit;h.xp6(1),h.hij(" ",t.telephone1," ")}}function k(t,e){1&t&&(h.TgZ(0,"th",36),h._uU(1," Phone2 "),h.qZA())}function J(t,e){if(1&t&&(h.TgZ(0,"td",37),h._uU(1),h.qZA()),2&t){const t=e.$implicit;h.xp6(1),h.hij(" ",t.telephone2," ")}}function S(t,e){1&t&&(h.TgZ(0,"th",36),h._uU(1," Email "),h.qZA())}function P(t,e){if(1&t&&(h.TgZ(0,"td",37),h._uU(1),h.qZA()),2&t){const t=e.$implicit;h.xp6(1),h.hij(" ",t.email1," ")}}function Q(t,e){1&t&&(h.TgZ(0,"th",36),h._uU(1," Address "),h.qZA())}function Y(t,e){if(1&t&&(h.TgZ(0,"td",37),h._uU(1),h.qZA()),2&t){const t=e.$implicit;h.xp6(1),h.hij(" ",t.address1.length>=10?t.address1.substr(0,10)+"...":t.address1," ")}}function O(t,e){1&t&&h._UZ(0,"th",36)}function U(t,e){if(1&t){const t=h.EpF();h.TgZ(0,"button",42),h.NdJ("click",function(){h.CHM(t);const e=h.oxw().$implicit;return h.oxw().onClick_edit(e)}),h.TgZ(1,"i",43),h._uU(2,"edit"),h.qZA(),h.qZA()}if(2&t){const t=h.oxw(2);h.Q6J("hidden",!t.permission.isUpdate)}}function E(t,e){if(1&t){const t=h.EpF();h.TgZ(0,"button",44),h.NdJ("click",function(){h.CHM(t);const e=h.oxw().$implicit;return h.oxw().onClick_remove(e)}),h.TgZ(1,"i",43),h._uU(2,"delete"),h.qZA(),h.qZA()}if(2&t){const t=h.oxw(2);h.Q6J("hidden",!t.permission.isDelete)}}function L(t,e){if(1&t&&(h.TgZ(0,"td",38),h.TgZ(1,"div",39),h.YNc(2,U,3,1,"button",40),h.YNc(3,E,3,1,"button",41),h.qZA(),h.qZA()),2&t){const t=h.oxw();h.xp6(2),h.Q6J("ngIf",null!=t.permission),h.xp6(1),h.Q6J("ngIf",null!=t.permission)}}function V(t,e){1&t&&h._UZ(0,"tr",45)}function z(t,e){1&t&&h._UZ(0,"tr",46)}let $=(()=>{class t extends g.H{constructor(t,e,o,r){super(t),this.router=t,this.customerService=e,this.matSnackbar=o,this.dialog=r,this.displayedColumns=["Customer","Phone1","Phone2","Email","Address","action"],this.bookingList=[],this.dataSourceCustomer=new c.by,this.pageLength=0,this.pageSizeOptions=[50,100,300],this.criterial=""}ngOnInit(){let t=this.session.getLoginSession();this.permission=t.group.groupPermission.filter(t=>t.pageID==l.o.customersPageID)[0],this.permission&&1==this.permission.isView?this.setUpPagin():d.C.showNotification("Permission Denied",l.o.warningNotify)}setUpPagin(){this.customerService.getCountCustomers().subscribe(t=>{t.status==m.G.success&&(this.pageLength=t.body[0],this.getListCustomers(0,50))})}getListCustomers(t,e){this.customerService.getListCustomers(t,e).subscribe(t=>{console.log(t.body),this.dataSourceCustomer.data=t.status==m.G.success?t.body:null})}paginatorEvent(t){this.getListCustomers(t.pageIndex*t.pageSize,t.pageSize)}onClick_New(){let t={queryParams:{element:JSON.stringify({isEdit:0})}};this.router.navigate(["/customer-form"],t)}onClick_edit(t){let e={queryParams:{element:JSON.stringify({ID:t.ID,isEdit:"1"})}};this.router.navigate(["./customer-form"],e)}applyFilter(t){this.dataSourceCustomer.filter=t}refreshData(t){this.dataSourceCustomer.data=[],this.getListCustomers(0,50),this.applyFilter(t)}getCustomers(){this.customerService.getCustomers().subscribe(t=>{this.dataSourceCustomer.data=t.body})}onClick_remove(t){this.dialog.open(p.K,{width:"270px",data:{message:"Are you sure ?",title:"Remove"}}).afterClosed().subscribe(e=>{1==e&&this.customerService.removeCustomer(t.ID).subscribe(e=>{e.status==m.G.success?(this.matSnackbar.open(e.body[0].toString(),e.status,{duration:2e3}),this.dataSourceCustomer.data.splice(this.dataSourceCustomer.data.indexOf(t),1),this.tblBooking.renderRows()):this.matSnackbar.open(e.body[0].toString(),e.status,{duration:2e3})})})}}return t.\u0275fac=function(e){return new(e||t)(h.Y36(i.F0),h.Y36(f.v),h.Y36(Z.ux),h.Y36(y.uw))},t.\u0275cmp=h.Xpm({type:t,selectors:[["app-customer-home"]],viewQuery:function(t,e){if(1&t&&h.Gf(N,5),2&t){let t;h.iGM(t=h.CRH())&&(e.tblBooking=t.first)}},features:[h.qOj],decls:53,vars:13,consts:[[1,"main-content","p-0","m-0",3,"hidden"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"card","m-0"],[1,"card-body"],[1,"d-flex","justify-content-start"],[1,"subHeaderTitle"],[2,"margin-top","-8px"],["mat-icon-button","","aria-label","Example icon-button with a menu",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"disabled","click"],[1,"col-md-2","mrtb-0","pltb-0"],[1,"fullWidth"],["matPrefix",""],["matInput","","type","text","placeholder","search","name","criterial",3,"ngModel","keyup","ngModelChange"],["class","ml-3","mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["class","ml-2","mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"col-md-10"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],[1,"tbl-container","table-responsive"],["mat-table","",3,"dataSource","dataSourceChange"],["tblCustomer",""],["matColumnDef","Customer"],["mat-header-cell","","class","text-primary",4,"matHeaderCellDef"],["mat-cell","","matRipple","",4,"matCellDef"],["matColumnDef","Phone1"],["matColumnDef","Phone2"],["matColumnDef","Email"],["matColumnDef","Address"],["matColumnDef","action"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["class","mat-row","mat-row","",4,"matRowDef","matRowDefColumns"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",1,"ml-3",3,"click"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",1,"ml-2",3,"click"],["mat-header-cell","",1,"text-primary"],["mat-cell","","matRipple",""],["mat-cell",""],[1,"d-flex","justify-content-end"],["mat-raised-button","","type","button","class","btn btn-success btn-link p-1 m-0",3,"hidden","click",4,"ngIf"],["mat-raised-button","","type","button","class","btn btn-danger btn-link p-0 m-0",3,"hidden","click",4,"ngIf"],["mat-raised-button","","type","button",1,"btn","btn-success","btn-link","p-1","m-0",3,"hidden","click"],[1,"material-icons"],["mat-raised-button","","type","button",1,"btn","btn-danger","btn-link","p-0","m-0",3,"hidden","click"],["mat-header-row",""],["mat-row","",1,"mat-row"]],template:function(t,e){if(1&t&&(h.TgZ(0,"div",0),h.TgZ(1,"div",1),h.TgZ(2,"div",2),h.TgZ(3,"div",3),h.TgZ(4,"div",4),h.TgZ(5,"div",5),h.TgZ(6,"div",6),h.TgZ(7,"h4",7),h._uU(8,"Customer"),h.qZA(),h.TgZ(9,"div",8),h.TgZ(10,"button",9),h.TgZ(11,"mat-icon"),h._uU(12,"more_vert"),h.qZA(),h.qZA(),h.TgZ(13,"mat-menu",null,10),h.TgZ(15,"button",11),h.NdJ("click",function(){return e.onClick_New()}),h.TgZ(16,"mat-icon"),h._uU(17,"dialpad"),h.qZA(),h.TgZ(18,"span"),h._uU(19,"New"),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(20,"div",2),h.TgZ(21,"div",12),h.TgZ(22,"mat-form-field",13),h.TgZ(23,"mat-icon",14),h._uU(24,"search"),h.qZA(),h.TgZ(25,"input",15),h.NdJ("keyup",function(t){return e.applyFilter(t.target.value)})("ngModelChange",function(t){return e.criterial=t}),h.qZA(),h.YNc(26,x,3,0,"button",16),h.YNc(27,I,3,0,"button",17),h.qZA(),h.qZA(),h.TgZ(28,"div",18),h.TgZ(29,"mat-paginator",19),h.NdJ("page",function(t){return e.paginatorEvent(t)}),h.qZA(),h.qZA(),h.qZA(),h.TgZ(30,"div",20),h.TgZ(31,"table",21,22),h.NdJ("dataSourceChange",function(t){return e.dataSourceCustomer=t}),h.ynx(33,23),h.YNc(34,w,2,0,"th",24),h.YNc(35,D,2,1,"td",25),h.BQk(),h.ynx(36,26),h.YNc(37,F,2,0,"th",24),h.YNc(38,M,2,1,"td",25),h.BQk(),h.ynx(39,27),h.YNc(40,k,2,0,"th",24),h.YNc(41,J,2,1,"td",25),h.BQk(),h.ynx(42,28),h.YNc(43,S,2,0,"th",24),h.YNc(44,P,2,1,"td",25),h.BQk(),h.ynx(45,29),h.YNc(46,Q,2,0,"th",24),h.YNc(47,Y,2,1,"td",25),h.BQk(),h.ynx(48,30),h.YNc(49,O,1,0,"th",24),h.YNc(50,L,4,2,"td",31),h.BQk(),h.YNc(51,V,1,0,"tr",32),h.YNc(52,z,1,0,"tr",33),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&t){const t=h.MAs(14);h.Q6J("hidden",!e.permission.isView),h.xp6(10),h.Q6J("matMenuTriggerFor",t),h.xp6(5),h.Q6J("disabled",!e.permission.isAdd),h.xp6(10),h.Q6J("ngModel",e.criterial),h.xp6(1),h.Q6J("ngIf",e.criterial),h.xp6(1),h.Q6J("ngIf",e.criterial),h.xp6(2),h.Q6J("length",e.pageLength)("pageSize",e.pageSize)("pageSizeOptions",e.pageSizeOptions),h.xp6(2),h.Q6J("dataSource",e.dataSourceCustomer),h.xp6(20),h.Q6J("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",!0),h.xp6(1),h.Q6J("matRowDefColumns",e.displayedColumns)}},directives:[C.lW,T.p6,b.Hw,T.VK,T.OP,A.KE,A.qo,q.Nt,n.Fj,n.JJ,n.On,r.O5,_.NW,c.BZ,c.w1,c.fO,c.Dz,c.as,c.nj,A.R9,c.ge,c.ev,v.wG,c.XQ,c.Gk],styles:[".customerName[_ngcontent-%COMP%]{margin-bottom:0}.place[_ngcontent-%COMP%], phone[_ngcontent-%COMP%]{margin-bottom:0;color:gray;font-size:12px}.placeIconSize[_ngcontent-%COMP%]{font-size:14px!important}.phoneIconSize[_ngcontent-%COMP%]{font-size:14px!important}table[_ngcontent-%COMP%]{width:100%}mat-cell[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-weight:400}.mat-row[_ngcontent-%COMP%]:hover{background:whitesmoke}"]}),t})();var j=o(87524);class H{}var B=o(39761),R=o(88002),G=o(37320),K=o(55259),W=o(51440),X=o(67441),tt=o(21554);function et(t,e){if(1&t&&(h.TgZ(0,"mat-option",36),h._uU(1),h.qZA()),2&t){const t=e.$implicit;h.Q6J("value",t.ID),h.xp6(1),h.hij(" ",t.value,"")}}function ot(t,e){1&t&&(h.TgZ(0,"mat-error"),h._uU(1,"Please choose Client Type "),h.qZA())}function rt(t,e){if(1&t&&(h.TgZ(0,"mat-error",38),h._uU(1),h.qZA()),2&t){const t=h.oxw().$implicit;h.xp6(1),h.hij(" ",t.message," ")}}function it(t,e){if(1&t&&(h.TgZ(0,"mat-error"),h.YNc(1,rt,2,1,"mat-error",37),h.qZA()),2&t){const t=e.$implicit,o=h.oxw();h.xp6(1),h.Q6J("ngIf",o.customerDetailForm.get("VATNo").hasError(t.type)&&(o.customerDetailForm.get("VATNo").dirty||o.customerDetailForm.get("VATNo").touched))}}function nt(t,e){if(1&t&&(h.TgZ(0,"mat-error",38),h._uU(1),h.qZA()),2&t){const t=h.oxw().$implicit;h.xp6(1),h.hij(" ",t.message," ")}}function st(t,e){if(1&t&&(h.TgZ(0,"mat-error"),h.YNc(1,nt,2,1,"mat-error",37),h.qZA()),2&t){const t=e.$implicit,o=h.oxw();h.xp6(1),h.Q6J("ngIf",o.customerDetailForm.get("name").hasError(t.type)&&(o.customerDetailForm.get("name").dirty||o.customerDetailForm.get("name").touched))}}function at(t,e){if(1&t&&(h.TgZ(0,"mat-error",38),h._uU(1),h.qZA()),2&t){const t=h.oxw().$implicit;h.xp6(1),h.hij(" ",t.message," ")}}function ut(t,e){if(1&t&&(h.TgZ(0,"mat-error"),h.YNc(1,at,2,1,"mat-error",39),h.qZA()),2&t){const t=e.$implicit,o=h.oxw();h.xp6(1),h.Q6J("ngIf",o.customerDetailForm.get("telephone1").hasError(t.type)&&(o.customerDetailForm.get("telephone1").dirty||o.customerDetailForm.get("telephone1").touched))}}function ct(t,e){if(1&t&&(h.TgZ(0,"mat-error",38),h._uU(1),h.qZA()),2&t){const t=h.oxw().$implicit;h.xp6(1),h.hij(" ",t.message," ")}}function mt(t,e){if(1&t&&(h.TgZ(0,"mat-error"),h.YNc(1,ct,2,1,"mat-error",39),h.qZA()),2&t){const t=e.$implicit,o=h.oxw();h.xp6(1),h.Q6J("ngIf",o.customerDetailForm.get("telephone2").hasError(t.type)&&(o.customerDetailForm.get("telephone2").dirty||o.customerDetailForm.get("telephone2").touched))}}function lt(t,e){if(1&t&&(h.TgZ(0,"mat-error",38),h._uU(1),h.qZA()),2&t){const t=h.oxw().$implicit;h.xp6(1),h.hij(" ",t.message," ")}}function dt(t,e){if(1&t&&(h.TgZ(0,"mat-error"),h.YNc(1,lt,2,1,"mat-error",39),h.qZA()),2&t){const t=e.$implicit,o=h.oxw();h.xp6(1),h.Q6J("ngIf",o.customerDetailForm.get("email1").hasError(t.type)&&(o.customerDetailForm.get("email1").dirty||o.customerDetailForm.get("email1").touched))}}function gt(t,e){if(1&t&&(h.TgZ(0,"mat-error",38),h._uU(1),h.qZA()),2&t){const t=h.oxw().$implicit;h.xp6(1),h.hij(" ",t.message," ")}}function pt(t,e){if(1&t&&(h.TgZ(0,"mat-error"),h.YNc(1,gt,2,1,"mat-error",37),h.qZA()),2&t){const t=e.$implicit,o=h.oxw();h.xp6(1),h.Q6J("ngIf",o.customerDetailForm.get("email2").hasError(t.type)&&(o.customerDetailForm.get("email2").dirty||o.customerDetailForm.get("email2").touched))}}function ht(t,e){if(1&t&&(h.TgZ(0,"mat-error",38),h._uU(1),h.qZA()),2&t){const t=h.oxw().$implicit;h.xp6(1),h.hij(" ",t.message," ")}}function ft(t,e){if(1&t&&(h.TgZ(0,"mat-error"),h.YNc(1,ht,2,1,"mat-error",37),h.qZA()),2&t){const t=e.$implicit,o=h.oxw();h.xp6(1),h.Q6J("ngIf",o.customerDetailForm.get("contactPhone").hasError(t.type)&&(o.customerDetailForm.get("contactPhone").dirty||o.customerDetailForm.get("contactPhone").touched))}}function Zt(t,e){if(1&t&&(h.TgZ(0,"mat-option",36),h._uU(1),h.qZA()),2&t){const t=e.$implicit;h.Q6J("value",t),h.xp6(1),h.hij(" ",t.description," ")}}function yt(t,e){if(1&t){const t=h.EpF();h.TgZ(0,"div"),h.TgZ(1,"button",40),h.NdJ("click",function(){h.CHM(t);const e=h.oxw();return e.onSubmitCustomerDefail(e.customerDetailForm.value)}),h._uU(2,"Save"),h.qZA(),h.qZA()}if(2&t){const t=h.oxw();h.xp6(1),h.Q6J("disabled",!t.permission.isAdd)("disabled",0==t.customerDetailForm.valid)}}const Ct=[{path:"",children:[{path:"customers",component:$},{path:"customer-form",component:(()=>{class t extends g.H{constructor(t,e,o,r,i,n,s,a,u){super(n),this.formBuilder=t,this.customerService=e,this.predataService=o,this.countryService=r,this.dialog=i,this.router=n,this.activateRoute=s,this.matSnackbar=a,this._dateFormatPipe=u,this.validation_messages={name:[{type:"required",message:"Name is required"}],phone:[{type:"pattern",message:"Enter a valid phonenumber"}],email:[{type:"pattern",message:"Enter a valid email"}],clientType:[{type:"required",message:"Type is required"}],VATNo:[{type:"required",message:"VAT No is required"}]},this.customer=new j.v,this.isEdit="0"}ngOnInit(){this.initForm();let t=this.session.getLoginSession();this.permission=t.group.groupPermission.filter(t=>t.pageID==l.o.customerFormPageID)[0],this.permission&&1==this.permission.isView?(this.checkModifyPermission(),this.loadPredata(),this.onLoadData()):d.C.showNotification("Permission Denied",l.o.warningNotify)}initForm(){let t=new n.NI("",{validators:n.kI.compose([n.kI.required])}),e=new n.NI("",{validators:n.kI.compose([n.kI.required])});this.countryFrmController=new n.NI,this.clientType=new n.NI,this.customerDetailForm=this.formBuilder.group({name:t,nameKH:new n.NI,telephone1:new n.NI,telephone2:new n.NI,email1:new n.NI,email2:new n.NI,contactName:new n.NI,contactPhone:new n.NI,city:new n.NI,countryCode:new n.NI,country:this.countryFrmController,isCustomer:new n.NI,VATNo:e,clientType:this.clientType,streetNo:new n.NI,homeNo:new n.NI,address1:new n.NI,address2:new n.NI})}onClick_new(){this.customer=new j.v}onLoadData(){console.log("object"),this.activateRoute.queryParams.subscribe(t=>{if(t.element){let e=JSON.parse(t.element);e&&"1"==e.isEdit&&(this.isEdit="1",0==this.permission.isUpdate&&(this.isModify=!1),this.customerService.findCustomerByID(e.ID).subscribe(t=>{if(console.log(t),t.status==m.G.success&&t.body.length>0){this.customer=t.body[0];let o=[];try{this.countryFrmController.setValue(this.countryList.filter(t=>t.description.toLowerCase()==this.customer.country.toLowerCase())[0])}catch(e){console.log(e)}this.customer.customerType.forEach(t=>{console.log(t),1==t.isActive&&o.push(t.predataID)}),this.clientType.setValue(o)}}))}})}onSubmitCustomerDefail(t){this.getCustomerTypeSelected(),0!=new RegExp(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/).test(this.customer.email1)?this.dialog.open(p.K,{width:"270px",data:{message:"Are you sure ?",title:"Save"}}).afterClosed().subscribe(t=>{1==t&&this.customerService.addCustomers(this.customer).subscribe(t=>{t.status==m.G.success?(this.matSnackbar.open(t.body[0].toString(),t.status,{duration:3e3}),this.router.navigate(["/customers"])):this.matSnackbar.open(t.body[0].toString(),t.status,{duration:4e3})})}):this.matSnackbar.open("Validation","Invalid email",{duration:4e3})}getCustomerTypeSelected(){let t=this.clientType.value;this.customer.customerType.length>0?(t.forEach(e=>{let o=this.customer.customerType.filter(t=>t.predataID==e);if(o.length>0){if(t.filter(t=>!o[0].predataID).length>0){let t=new H;t.predataID=e,this.customer.customerType.push(t)}}else if(0==this.customer.customerType.filter(t=>t.predataID==e).length){let t=new H;t.predataID=e,this.customer.customerType.push(t)}}),this.customer.customerType.forEach(t=>{t.isActive=0}),t.forEach(t=>{this.customer.customerType.filter(e=>e.predataID==t)[0].isActive=1})):t.forEach(t=>{let e=new H;e.isActive=1,e.predataID=t,this.customer.customerType.push(e)})}onCheckboxCustomerChanged(t){this.customer.isCustomer=t.checked,t.checked?this.customerDetailForm.get("VATNo").setValidators(n.kI.required):this.customerDetailForm.get("VATNo").setValidators([])}loadPredata(){this.predataService.getPreDefinedsByCriterial(l.o.clientType).subscribe(t=>{t.status==m.G.success&&t.body.length>0&&(this.clientTypeList=t.body,this.clientType.setValue([87]),this.clientType.setValidators(n.kI.required))}),this.countryService.getListCountrys().subscribe(t=>{console.log(t),t.status==m.G.success&&(this.countryList=t.body,this.filteredCountry=this.countryFrmController.valueChanges.pipe((0,B.O)(""),(0,R.U)(t=>"string"==typeof t?t:t?t.name:""),(0,R.U)(t=>t?this.onfilteredCountry(t):this.countryList.slice())))})}onfilteredCountry(t){return this.countryList.filter(e=>1==e.description.toLowerCase().includes(t.toLowerCase()))}displayCountry(t){return t?t.description:void 0}onSelectionCountryChanged(t){t.option.value&&(this.countryResponse=t.option.value,this.customer.country=this.countryResponse.description,this.customer.countryCode=this.countryResponse.countryCode,this.customer.city=this.countryResponse.capital)}}return t.\u0275fac=function(e){return new(e||t)(h.Y36(n.qu),h.Y36(f.v),h.Y36(G.y),h.Y36(K.T),h.Y36(y.uw),h.Y36(i.F0),h.Y36(i.gz),h.Y36(Z.ux),h.Y36(W.E))},t.\u0275cmp=h.Xpm({type:t,selectors:[["app-customer-form"]],features:[h.qOj],decls:91,vars:35,consts:[[1,"main-content","p-0","m-0",3,"hidden"],[1,"container-fluid"],[3,"formGroup"],[1,"card","p-4"],["mat-icon-button","","aria-label","Example icon-button with a menu",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"disabled","click"],[1,"card-body"],[1,"m-2"],[1,"row"],[1,"col-sm-6"],["placeholder","Client Type","multiple","","required","",3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"row",3,"hidden"],["matInput","","placeholder","VAT No","formControlName","VATNo",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["matInput","","required","","placeholder","Name/Company","formControlName","name",3,"ngModel","ngModelChange"],["matInput","","placeholder","Name KH","formControlName","nameKH",3,"ngModel","ngModelChange"],["matInput","","pattern","^\\+?[0-9]{3}-?[0-9]{6,12}$","placeholder","Telephone 1","formControlName","telephone1",3,"ngModel","ngModelChange"],["matInput","","pattern","^\\+?[0-9]{3}-?[0-9]{6,12}$","value","000000000","placeholder","Telephone 2(optional)","formControlName","telephone2",3,"ngModel","ngModelChange"],[1,"example-full-width"],["matInput","","type","email","pattern","[^@\\s]+@[^@\\s]+","placeholder","Email","formControlName","email1",3,"ngModel","ngModelChange"],["matInput","","type","email","pattern","[^@\\s]+@[^@\\s]+","placeholder","Email (optional)","formControlName","email2",3,"ngModel","ngModelChange"],["matInput","","placeholder","Contact Name","formControlName","contactName",3,"ngModel","ngModelChange"],["matInput","","pattern","[0-9]","placeholder","Contact Phone","formControlName","contactPhone",3,"ngModel","ngModelChange"],["type","text","formControlName","country","placeholder","Country","matInput","",3,"matAutocomplete"],[3,"displayWith","optionSelected"],["autoCountry","matAutocomplete"],["matInput","","formControlName","countryCode","name","countryCode","id","countryCode","placeholder","Country Code",3,"ngModel","ngModelChange"],["matInput","","formControlName","city","name","city","id","city","placeholder","City",3,"ngModel","ngModelChange"],[1,"fullWidth"],["matInput","","formControlName","address1","placeholder","Address1",3,"ngModel","ngModelChange"],["matInput","","formControlName","address2","placeholder","Address2",3,"ngModel","ngModelChange"],[1,"col-sm-12","d-flex","justify-content-end"],["mat-raised-button","","routerLink","/customers","mat-stroked-button","",1,"btn","btn-default","btn-sm","mr-4"],[3,"value"],["class","error-message",4,"ngIf"],[1,"error-message"],["class","error-message","class","error-message",4,"ngIf"],["mat-raised-button","",1,"btn","btn-primary","btn-sm",3,"disabled","click"]],template:function(t,e){if(1&t&&(h.TgZ(0,"div",0),h.TgZ(1,"div",1),h.TgZ(2,"form",2),h.TgZ(3,"div",3),h.TgZ(4,"div"),h.TgZ(5,"div"),h._uU(6,"Customer"),h.qZA(),h.TgZ(7,"div"),h.TgZ(8,"button",4),h.TgZ(9,"mat-icon"),h._uU(10,"more_vert"),h.qZA(),h.qZA(),h.TgZ(11,"mat-menu",null,5),h.TgZ(13,"button",6),h.NdJ("click",function(){return e.onSubmitCustomerDefail(e.customerDetailForm.value)}),h.TgZ(14,"span"),h._uU(15,"Save"),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(16,"div",7),h.TgZ(17,"div",8),h.TgZ(18,"div",9),h.TgZ(19,"div",10),h.TgZ(20,"mat-form-field"),h.TgZ(21,"mat-select",11),h.YNc(22,et,2,2,"mat-option",12),h.qZA(),h.YNc(23,ot,2,0,"mat-error",13),h.qZA(),h.qZA(),h.qZA(),h.TgZ(24,"div",14),h.TgZ(25,"div",10),h.TgZ(26,"mat-form-field"),h.TgZ(27,"input",15),h.NdJ("ngModelChange",function(t){return e.customer.VATNo=t}),h.qZA(),h.YNc(28,it,2,1,"mat-error",16),h.qZA(),h.qZA(),h.qZA(),h.TgZ(29,"div",9),h.TgZ(30,"div",10),h.TgZ(31,"mat-form-field"),h.TgZ(32,"input",17),h.NdJ("ngModelChange",function(t){return e.customer.name=t}),h.qZA(),h.YNc(33,st,2,1,"mat-error",16),h.qZA(),h.qZA(),h.TgZ(34,"div",10),h.TgZ(35,"mat-form-field"),h.TgZ(36,"input",18),h.NdJ("ngModelChange",function(t){return e.customer.nameKH=t}),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(37,"div",9),h.TgZ(38,"div",10),h.TgZ(39,"mat-form-field"),h.TgZ(40,"input",19),h.NdJ("ngModelChange",function(t){return e.customer.telephone1=t}),h.qZA(),h.YNc(41,ut,2,1,"mat-error",16),h.qZA(),h.qZA(),h.TgZ(42,"div",10),h.TgZ(43,"mat-form-field"),h.TgZ(44,"input",20),h.NdJ("ngModelChange",function(t){return e.customer.telephone2=t}),h.qZA(),h.YNc(45,mt,2,1,"mat-error",16),h.qZA(),h.qZA(),h.qZA(),h.TgZ(46,"div",9),h.TgZ(47,"div",10),h.TgZ(48,"mat-form-field",21),h.TgZ(49,"input",22),h.NdJ("ngModelChange",function(t){return e.customer.email1=t}),h.qZA(),h.YNc(50,dt,2,1,"mat-error",16),h.qZA(),h.qZA(),h.TgZ(51,"div",10),h.TgZ(52,"mat-form-field"),h.TgZ(53,"input",23),h.NdJ("ngModelChange",function(t){return e.customer.email2=t}),h.qZA(),h.YNc(54,pt,2,1,"mat-error",16),h.qZA(),h.qZA(),h.qZA(),h.TgZ(55,"div",9),h.TgZ(56,"div",10),h.TgZ(57,"mat-form-field"),h.TgZ(58,"input",24),h.NdJ("ngModelChange",function(t){return e.customer.contactName=t}),h.qZA(),h.qZA(),h.qZA(),h.TgZ(59,"div",10),h.TgZ(60,"mat-form-field"),h.TgZ(61,"input",25),h.NdJ("ngModelChange",function(t){return e.customer.contactPhone=t}),h.qZA(),h.YNc(62,ft,2,1,"mat-error",16),h.qZA(),h.qZA(),h.qZA(),h.TgZ(63,"div",9),h.TgZ(64,"div",10),h.TgZ(65,"mat-form-field"),h._UZ(66,"input",26),h.TgZ(67,"mat-autocomplete",27,28),h.NdJ("optionSelected",function(t){return e.onSelectionCountryChanged(t)}),h.YNc(69,Zt,2,2,"mat-option",12),h.ALo(70,"async"),h.qZA(),h.qZA(),h.qZA(),h.TgZ(71,"div",10),h.TgZ(72,"div",9),h.TgZ(73,"div",10),h.TgZ(74,"mat-form-field"),h.TgZ(75,"input",29),h.NdJ("ngModelChange",function(t){return e.customer.countryCode=t}),h.qZA(),h.qZA(),h.qZA(),h.TgZ(76,"div",10),h.TgZ(77,"mat-form-field"),h.TgZ(78,"input",30),h.NdJ("ngModelChange",function(t){return e.customer.city=t}),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(79,"div",9),h.TgZ(80,"div",10),h.TgZ(81,"mat-form-field",31),h.TgZ(82,"textarea",32),h.NdJ("ngModelChange",function(t){return e.customer.address1=t}),h.qZA(),h.qZA(),h.qZA(),h.TgZ(83,"div",10),h.TgZ(84,"mat-form-field"),h.TgZ(85,"textarea",33),h.NdJ("ngModelChange",function(t){return e.customer.address2=t}),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(86,"div",9),h.TgZ(87,"div",34),h.TgZ(88,"button",35),h._uU(89,"Cancel"),h.qZA(),h.YNc(90,yt,3,2,"div",13),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&t){const t=h.MAs(12),o=h.MAs(68);h.Q6J("hidden",!e.permission.isView),h.xp6(2),h.Q6J("formGroup",e.customerDetailForm),h.xp6(6),h.Q6J("matMenuTriggerFor",t),h.xp6(5),h.Q6J("disabled",!e.permission.isAdd)("disabled",!e.customerDetailForm.valid),h.xp6(8),h.Q6J("formControl",e.clientType),h.xp6(1),h.Q6J("ngForOf",e.clientTypeList),h.xp6(1),h.Q6J("ngIf",e.clientType.hasError("required")),h.xp6(1),h.Q6J("hidden",!e.customer.isCustomer),h.xp6(3),h.Q6J("ngModel",e.customer.VATNo),h.xp6(1),h.Q6J("ngForOf",e.validation_messages.VATNo),h.xp6(4),h.Q6J("ngModel",e.customer.name),h.xp6(1),h.Q6J("ngForOf",e.validation_messages.name),h.xp6(3),h.Q6J("ngModel",e.customer.nameKH),h.xp6(4),h.Q6J("ngModel",e.customer.telephone1),h.xp6(1),h.Q6J("ngForOf",e.validation_messages.phone),h.xp6(3),h.Q6J("ngModel",e.customer.telephone2),h.xp6(1),h.Q6J("ngForOf",e.validation_messages.phone),h.xp6(4),h.Q6J("ngModel",e.customer.email1),h.xp6(1),h.Q6J("ngForOf",e.validation_messages.email),h.xp6(3),h.Q6J("ngModel",e.customer.email2),h.xp6(1),h.Q6J("ngForOf",e.validation_messages.email),h.xp6(4),h.Q6J("ngModel",e.customer.contactName),h.xp6(3),h.Q6J("ngModel",e.customer.contactPhone),h.xp6(1),h.Q6J("ngForOf",e.validation_messages.phone),h.xp6(4),h.Q6J("matAutocomplete",o),h.xp6(1),h.Q6J("displayWith",e.displayCountry),h.xp6(2),h.Q6J("ngForOf",h.lcZ(70,33,e.filteredCountry)),h.xp6(6),h.Q6J("ngModel",e.customer.countryCode),h.xp6(3),h.Q6J("ngModel",e.customer.city),h.xp6(4),h.Q6J("ngModel",e.customer.address1),h.xp6(3),h.Q6J("ngModel",e.customer.address2),h.xp6(5),h.Q6J("ngIf",e.isModify)}},directives:[n._Y,n.JL,n.sg,C.lW,T.p6,b.Hw,T.VK,T.OP,A.KE,X.gD,n.Q7,n.JJ,n.oH,r.sg,r.O5,q.Nt,n.Fj,n.u,n.c5,tt.ZL,tt.XC,i.rH,v.ey,A.TO],pipes:[r.Ov],styles:[".customerDetailForm[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%}.fullWidth[_ngcontent-%COMP%]{width:100%}.group-reply[_ngcontent-%COMP%]{box-sizing:border-box;display:flex;padding:0!important}.btn[_ngcontent-%COMP%]{height:34px;margin-top:auto;background-color:#0bc6dd;color:#fff}"]}),t})()}]}];let Tt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=h.oAB({type:t}),t.\u0275inj=h.cJS({imports:[[r.ez,i.Bz.forChild(Ct),n.u5,n.UX,s.TW,a.vO,u.q]]}),t})()},72541:function(t,e,o){o.d(e,{v:function(){return c}});var r=o(65136),i=o(82327),n=o(927),s=o(37716),a=o(91841),u=o(39895);let c=(()=>{class t extends r.b{constructor(t,e){super(e),this.http=t}addCustomers(t){return this.http.post(i.V.addCustomers,t)}getListCustomers(t,e){return this.http.post(i.V.getListCustomers,{pageIndex:t,pageSize:e})}getCustomers(){return this.http.post(i.V.getListCustomers,{})}getCustomerByType(t){return this.http.post(i.V.getCustomerByType,{customerType:t})}removeCustomer(t){let e={customerID:t,userID:(new n.E).getUID()};return this.http.post(i.V.removeCustomer,e)}getCountCustomers(){return this.http.post(i.V.getCountCustomers,{})}findCustomerByID(t){return this.http.post(i.V.findCustomerByID,{customerID:t})}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(a.eN),s.LFG(u.F0))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},84934:function(t,e,o){o.d(e,{o:function(){return r}});var r=(()=>{return(t=r||(r={})).CKSNFILE="CKSNFILE",t.staff_position="staff_position",t.group_list="group_list",t.limit_file_upload="limit_file_upload",t.permission_page="permission_page",t.container_size="container_size",t.gw_unit_type="gw_unit_type",t.quantity_unit_type="quantity_unit_type",t.cbm_unit_type="cbm_unit_type",t.record_status="record_status",t.booking_mode="booking_mode",t.incoterm="incoterm",t.carrier="carrier",t.pod="pod",t.pol="pol",t.lcl="load_container_less",t.clientType="Client Type",t.border="border",t.operationgroup="1",t.tansportationgroup="2",t.brokergroup="3",t.seaPortType="1",t.driver="21",t.dem_due_warning="dem_due_warning",t.det_due_warning="det_due_warning",t[t.bookingsPageID=1]="bookingsPageID",t[t.bookingFormPageID=2]="bookingFormPageID",t[t.customersPageID=3]="customersPageID",t[t.customerFormPageID=4]="customerFormPageID",t[t.businessPageID=5]="businessPageID",t[t.businessFormPageID=6]="businessFormPageID",t[t.usersPageID=7]="usersPageID",t[t.userFormPageID=8]="userFormPageID",t[t.groupsPageID=9]="groupsPageID",t[t.groupFormPageID=10]="groupFormPageID",t[t.predataPageID=11]="predataPageID",t[t.predataFormPageID=12]="predataFormPageID",t[t.containerPageID=13]="containerPageID",t[t.department=14]="department",t[t.portSummary=15]="portSummary",t[t.portForm=16]="portForm",t[t.truckSummary=17]="truckSummary",t[t.truckForm=18]="truckForm",t[t.report=19]="report",t[t.dashboardID=20]="dashboardID",t[t.carrierID=21]="carrierID",t.billType="billType",t.warningNotify="warning",t.infoNotify="info",t.successNotify="success",t.dangerNotify="danger",t.roseNotify="rose",t.primaryNotify="primary",t[t.type_of_shipper_exporter_seller=84]="type_of_shipper_exporter_seller",t[t.type_of_consignee=85]="type_of_consignee",t[t.type_of_notify_party=86]="type_of_notify_party",t[t.type_of_customer=87]="type_of_customer",t[t.group_operation=1]="group_operation",t[t.group_transportation=2]="group_transportation",t[t.group_admin=5]="group_admin",t.containerStatus="containerStatus",t[t.containerStatus_DONE=93]="containerStatus_DONE",t.booking_status="booking_status",t[t.booking_status_new=36]="booking_status_new",t[t.booking_status_done=37]="booking_status_done",t[t.allValue=0]="allValue",t.all="All",t.multiDropStatus="MultiDropStatus",r;var t})()},37320:function(t,e,o){o.d(e,{y:function(){return u}});var r=o(65136),i=o(82327),n=o(37716),s=o(91841),a=o(39895);let u=(()=>{class t extends r.b{constructor(t,e){super(e),this.http=t}getPreDefinedsByCriterial(t){return this.http.post(i.V.getPredataByCriterial,{criterial:t})}addPreData(t){return this.http.post(i.V.addPreData,{predata:t})}getListPredatas(t,e,o){return t||(t="all"),this.http.post(i.V.getListPredatas,{criterial:t,pageIndex:e,pageSize:o})}getListCriterial(){return this.http.post(i.V.getListCriterial,{})}getCountPredatas(t){return this.http.post(i.V.getCountPredatas,{criterial:t})}}return t.\u0275fac=function(e){return new(e||t)(n.LFG(s.eN),n.LFG(a.F0))},t.\u0275prov=n.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},40355:function(t,e,o){o.d(e,{G:function(){return r}});var r=(()=>{return(t=r||(r={})).success="success",t.server_error="server_error",t.logic_error="logic_error",r;var t})()}}]);