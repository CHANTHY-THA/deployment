!function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,o,r){return o&&t(e.prototype,o),r&&t(e,r),e}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var o,r=u(e);if(t){var n=u(this).constructor;o=Reflect.construct(r,arguments,n)}else o=r.apply(this,arguments);return a(this,o)}}function a(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(self.webpackChunkmaterial_dashboard_pro_angular=self.webpackChunkmaterial_dashboard_pro_angular||[]).push([[960],{43960:function(t,n,a){a.r(n),a.d(n,{CustomerModule:function(){return qe}});var u=a(38583),s=a(39895),c=a(3679),m=a(90670),l=a(47361),d=a(41335),p=a(32789),g=a(40355),f=a(84934),h=a(23235),Z=a(61176),y=a(34958),v=a(37716),C=a(72541),T=a(77001),b=a(22238),A=a(51095),_=a(33935),q=a(76627),N=a(98295),x=a(83166),w=a(99692),I=a(72458),k=["tblCustomer"];function D(e,t){if(1&e){var o=v.EpF();v.TgZ(0,"button",34),v.NdJ("click",function(){v.CHM(o);var e=v.oxw();return e.refreshData(e.refresh)})("click",function(){return v.CHM(o),v.oxw().criterial=""}),v.TgZ(1,"mat-icon"),v._uU(2,"close"),v.qZA(),v.qZA()}}function F(e,t){if(1&e){var o=v.EpF();v.TgZ(0,"button",35),v.NdJ("click",function(){return v.CHM(o),v.oxw().getCustomers()}),v.TgZ(1,"mat-icon"),v._uU(2,"search"),v.qZA(),v.qZA()}}function M(e,t){1&e&&(v.TgZ(0,"th",36),v._uU(1," Customer "),v.qZA())}function J(e,t){if(1&e&&(v.TgZ(0,"td",37),v._uU(1),v.qZA()),2&e){var o=t.$implicit;v.xp6(1),v.hij(" ",o.name," ")}}function P(e,t){1&e&&(v.TgZ(0,"th",36),v._uU(1," Phone1 "),v.qZA())}function S(e,t){if(1&e&&(v.TgZ(0,"td",37),v._uU(1),v.qZA()),2&e){var o=t.$implicit;v.xp6(1),v.hij(" ",o.telephone1," ")}}function Q(e,t){1&e&&(v.TgZ(0,"th",36),v._uU(1," Phone2 "),v.qZA())}function O(e,t){if(1&e&&(v.TgZ(0,"td",37),v._uU(1),v.qZA()),2&e){var o=t.$implicit;v.xp6(1),v.hij(" ",o.telephone2," ")}}function Y(e,t){1&e&&(v.TgZ(0,"th",36),v._uU(1," Email "),v.qZA())}function E(e,t){if(1&e&&(v.TgZ(0,"td",37),v._uU(1),v.qZA()),2&e){var o=t.$implicit;v.xp6(1),v.hij(" ",o.email1," ")}}function U(e,t){1&e&&(v.TgZ(0,"th",36),v._uU(1," Address "),v.qZA())}function L(e,t){if(1&e&&(v.TgZ(0,"td",37),v._uU(1),v.qZA()),2&e){var o=t.$implicit;v.xp6(1),v.hij(" ",o.address1.length>=10?o.address1.substr(0,10)+"...":o.address1," ")}}function V(e,t){1&e&&v._UZ(0,"th",36)}function j(e,t){if(1&e){var o=v.EpF();v.TgZ(0,"button",42),v.NdJ("click",function(){v.CHM(o);var e=v.oxw().$implicit;return v.oxw().onClick_edit(e)}),v.TgZ(1,"i",43),v._uU(2,"edit"),v.qZA(),v.qZA()}if(2&e){var r=v.oxw(2);v.Q6J("hidden",!r.permission.isUpdate)}}function z(e,t){if(1&e){var o=v.EpF();v.TgZ(0,"button",44),v.NdJ("click",function(){v.CHM(o);var e=v.oxw().$implicit;return v.oxw().onClick_remove(e)}),v.TgZ(1,"i",43),v._uU(2,"delete"),v.qZA(),v.qZA()}if(2&e){var r=v.oxw(2);v.Q6J("hidden",!r.permission.isDelete)}}function R(e,t){if(1&e&&(v.TgZ(0,"td",38),v.TgZ(1,"div",39),v.YNc(2,j,3,1,"button",40),v.YNc(3,z,3,1,"button",41),v.qZA(),v.qZA()),2&e){var o=v.oxw();v.xp6(2),v.Q6J("ngIf",null!=o.permission),v.xp6(1),v.Q6J("ngIf",null!=o.permission)}}function $(e,t){1&e&&v._UZ(0,"tr",45)}function B(e,t){1&e&&v._UZ(0,"tr",46)}var H,G=((H=function(t){r(a,t);var n=i(a);function a(t,o,r,i){var u;return e(this,a),(u=n.call(this,t)).router=t,u.customerService=o,u.matSnackbar=r,u.dialog=i,u.displayedColumns=["Customer","Phone1","Phone2","Email","Address","action"],u.bookingList=[],u.dataSourceCustomer=new p.by,u.pageLength=0,u.pageSizeOptions=[50,100,300],u.criterial="",u}return o(a,[{key:"ngOnInit",value:function(){var e=this.session.getLoginSession();this.permission=e.group.groupPermission.filter(function(e){return e.pageID==f.o.customersPageID})[0],this.permission&&1==this.permission.isView?this.setUpPagin():h.C.showNotification("Permission Denied",f.o.warningNotify)}},{key:"setUpPagin",value:function(){var e=this;this.customerService.getCountCustomers().subscribe(function(t){t.status==g.G.success&&(e.pageLength=t.body[0],e.getListCustomers(0,50))})}},{key:"getListCustomers",value:function(e,t){var o=this;this.customerService.getListCustomers(e,t).subscribe(function(e){console.log(e.body),o.dataSourceCustomer.data=e.status==g.G.success?e.body:null})}},{key:"paginatorEvent",value:function(e){this.getListCustomers(e.pageIndex*e.pageSize,e.pageSize)}},{key:"onClick_New",value:function(){var e={queryParams:{element:JSON.stringify({isEdit:0})}};this.router.navigate(["/customer-form"],e)}},{key:"onClick_edit",value:function(e){var t={queryParams:{element:JSON.stringify({ID:e.ID,isEdit:"1"})}};this.router.navigate(["./customer-form"],t)}},{key:"applyFilter",value:function(e){this.dataSourceCustomer.filter=e}},{key:"refreshData",value:function(e){this.dataSourceCustomer.data=[],this.getListCustomers(0,50),this.applyFilter(e)}},{key:"getCustomers",value:function(){var e=this;this.customerService.getCustomers().subscribe(function(t){e.dataSourceCustomer.data=t.body})}},{key:"onClick_remove",value:function(e){var t=this;this.dialog.open(y.K,{width:"270px",data:{message:"Are you sure ?",title:"Remove"}}).afterClosed().subscribe(function(o){1==o&&t.customerService.removeCustomer(e.ID).subscribe(function(o){o.status==g.G.success?(t.matSnackbar.open(o.body[0].toString(),o.status,{duration:2e3}),t.dataSourceCustomer.data.splice(t.dataSourceCustomer.data.indexOf(e),1),t.tblBooking.renderRows()):t.matSnackbar.open(o.body[0].toString(),o.status,{duration:2e3})})})}}]),a}(Z.H)).\u0275fac=function(e){return new(e||H)(v.Y36(s.F0),v.Y36(C.v),v.Y36(T.ux),v.Y36(b.uw))},H.\u0275cmp=v.Xpm({type:H,selectors:[["app-customer-home"]],viewQuery:function(e,t){var o;1&e&&v.Gf(k,5),2&e&&v.iGM(o=v.CRH())&&(t.tblBooking=o.first)},features:[v.qOj],decls:53,vars:13,consts:[[1,"main-content",3,"hidden"],[1,"container-fluid"],[1,"row"],[1,"col-md-12","p-0","m-0"],[1,"card","m-0"],[1,"card-body"],[1,"d-flex","justify-content-start"],[1,"subHeaderTitle"],[2,"margin-top","-8px"],["mat-icon-button","","aria-label","Example icon-button with a menu",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"disabled","click"],[1,"col-md-2","mrtb-0","pltb-0"],[1,"fullWidth"],["matPrefix",""],["matInput","","type","text","placeholder","search","name","criterial",3,"ngModel","keyup","ngModelChange"],["class","ml-3","mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["class","ml-2","mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"col-md-10"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],[1,"tbl-container","table-responsive"],["mat-table","",3,"dataSource","dataSourceChange"],["tblCustomer",""],["matColumnDef","Customer"],["mat-header-cell","","class","text-primary",4,"matHeaderCellDef"],["mat-cell","","matRipple","",4,"matCellDef"],["matColumnDef","Phone1"],["matColumnDef","Phone2"],["matColumnDef","Email"],["matColumnDef","Address"],["matColumnDef","action"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["class","mat-row","mat-row","",4,"matRowDef","matRowDefColumns"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",1,"ml-3",3,"click"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",1,"ml-2",3,"click"],["mat-header-cell","",1,"text-primary"],["mat-cell","","matRipple",""],["mat-cell",""],[1,"d-flex","justify-content-end"],["mat-raised-button","","type","button","class","btn btn-success btn-link p-1 m-0",3,"hidden","click",4,"ngIf"],["mat-raised-button","","type","button","class","btn btn-danger btn-link p-0 m-0",3,"hidden","click",4,"ngIf"],["mat-raised-button","","type","button",1,"btn","btn-success","btn-link","p-1","m-0",3,"hidden","click"],[1,"material-icons"],["mat-raised-button","","type","button",1,"btn","btn-danger","btn-link","p-0","m-0",3,"hidden","click"],["mat-header-row",""],["mat-row","",1,"mat-row"]],template:function(e,t){if(1&e&&(v.TgZ(0,"div",0),v.TgZ(1,"div",1),v.TgZ(2,"div",2),v.TgZ(3,"div",3),v.TgZ(4,"div",4),v.TgZ(5,"div",5),v.TgZ(6,"div",6),v.TgZ(7,"h4",7),v._uU(8,"Customer"),v.qZA(),v.TgZ(9,"div",8),v.TgZ(10,"button",9),v.TgZ(11,"mat-icon"),v._uU(12,"more_vert"),v.qZA(),v.qZA(),v.TgZ(13,"mat-menu",null,10),v.TgZ(15,"button",11),v.NdJ("click",function(){return t.onClick_New()}),v.TgZ(16,"mat-icon"),v._uU(17,"dialpad"),v.qZA(),v.TgZ(18,"span"),v._uU(19,"New"),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.TgZ(20,"div",2),v.TgZ(21,"div",12),v.TgZ(22,"mat-form-field",13),v.TgZ(23,"mat-icon",14),v._uU(24,"search"),v.qZA(),v.TgZ(25,"input",15),v.NdJ("keyup",function(e){return t.applyFilter(e.target.value)})("ngModelChange",function(e){return t.criterial=e}),v.qZA(),v.YNc(26,D,3,0,"button",16),v.YNc(27,F,3,0,"button",17),v.qZA(),v.qZA(),v.TgZ(28,"div",18),v.TgZ(29,"mat-paginator",19),v.NdJ("page",function(e){return t.paginatorEvent(e)}),v.qZA(),v.qZA(),v.qZA(),v.TgZ(30,"div",20),v.TgZ(31,"table",21,22),v.NdJ("dataSourceChange",function(e){return t.dataSourceCustomer=e}),v.ynx(33,23),v.YNc(34,M,2,0,"th",24),v.YNc(35,J,2,1,"td",25),v.BQk(),v.ynx(36,26),v.YNc(37,P,2,0,"th",24),v.YNc(38,S,2,1,"td",25),v.BQk(),v.ynx(39,27),v.YNc(40,Q,2,0,"th",24),v.YNc(41,O,2,1,"td",25),v.BQk(),v.ynx(42,28),v.YNc(43,Y,2,0,"th",24),v.YNc(44,E,2,1,"td",25),v.BQk(),v.ynx(45,29),v.YNc(46,U,2,0,"th",24),v.YNc(47,L,2,1,"td",25),v.BQk(),v.ynx(48,30),v.YNc(49,V,1,0,"th",24),v.YNc(50,R,4,2,"td",31),v.BQk(),v.YNc(51,$,1,0,"tr",32),v.YNc(52,B,1,0,"tr",33),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA()),2&e){var o=v.MAs(14);v.Q6J("hidden",!t.permission.isView),v.xp6(10),v.Q6J("matMenuTriggerFor",o),v.xp6(5),v.Q6J("disabled",!t.permission.isAdd),v.xp6(10),v.Q6J("ngModel",t.criterial),v.xp6(1),v.Q6J("ngIf",t.criterial),v.xp6(1),v.Q6J("ngIf",t.criterial),v.xp6(2),v.Q6J("length",t.pageLength)("pageSize",t.pageSize)("pageSizeOptions",t.pageSizeOptions),v.xp6(2),v.Q6J("dataSource",t.dataSourceCustomer),v.xp6(20),v.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),v.xp6(1),v.Q6J("matRowDefColumns",t.displayedColumns)}},directives:[A.lW,_.p6,q.Hw,_.VK,_.OP,N.KE,N.qo,x.Nt,c.Fj,c.JJ,c.On,u.O5,w.NW,p.BZ,p.w1,p.fO,p.Dz,p.as,p.nj,N.R9,p.ge,p.ev,I.wG,p.XQ,p.Gk],styles:[".customerName[_ngcontent-%COMP%]{margin-bottom:0}.place[_ngcontent-%COMP%], phone[_ngcontent-%COMP%]{margin-bottom:0;color:gray;font-size:12px}.placeIconSize[_ngcontent-%COMP%]{font-size:14px!important}.phoneIconSize[_ngcontent-%COMP%]{font-size:14px!important}table[_ngcontent-%COMP%]{width:100%}mat-cell[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-weight:400}.mat-row[_ngcontent-%COMP%]:hover{background:whitesmoke}"]}),H),K=a(87524),W=function t(){e(this,t)},X=a(39761),ee=a(88002),te=a(37320),oe=a(55259),re=a(51440),ne=a(67441),ie=a(21554);function ae(e,t){if(1&e&&(v.TgZ(0,"mat-option",36),v._uU(1),v.qZA()),2&e){var o=t.$implicit;v.Q6J("value",o.ID),v.xp6(1),v.hij(" ",o.value,"")}}function ue(e,t){1&e&&(v.TgZ(0,"mat-error"),v._uU(1,"Please choose Client Type "),v.qZA())}function se(e,t){if(1&e&&(v.TgZ(0,"mat-error",38),v._uU(1),v.qZA()),2&e){var o=v.oxw().$implicit;v.xp6(1),v.hij(" ",o.message," ")}}function ce(e,t){if(1&e&&(v.TgZ(0,"mat-error"),v.YNc(1,se,2,1,"mat-error",37),v.qZA()),2&e){var o=t.$implicit,r=v.oxw();v.xp6(1),v.Q6J("ngIf",r.customerDetailForm.get("VATNo").hasError(o.type)&&(r.customerDetailForm.get("VATNo").dirty||r.customerDetailForm.get("VATNo").touched))}}function me(e,t){if(1&e&&(v.TgZ(0,"mat-error",38),v._uU(1),v.qZA()),2&e){var o=v.oxw().$implicit;v.xp6(1),v.hij(" ",o.message," ")}}function le(e,t){if(1&e&&(v.TgZ(0,"mat-error"),v.YNc(1,me,2,1,"mat-error",37),v.qZA()),2&e){var o=t.$implicit,r=v.oxw();v.xp6(1),v.Q6J("ngIf",r.customerDetailForm.get("name").hasError(o.type)&&(r.customerDetailForm.get("name").dirty||r.customerDetailForm.get("name").touched))}}function de(e,t){if(1&e&&(v.TgZ(0,"mat-error",38),v._uU(1),v.qZA()),2&e){var o=v.oxw().$implicit;v.xp6(1),v.hij(" ",o.message," ")}}function pe(e,t){if(1&e&&(v.TgZ(0,"mat-error"),v.YNc(1,de,2,1,"mat-error",39),v.qZA()),2&e){var o=t.$implicit,r=v.oxw();v.xp6(1),v.Q6J("ngIf",r.customerDetailForm.get("telephone1").hasError(o.type)&&(r.customerDetailForm.get("telephone1").dirty||r.customerDetailForm.get("telephone1").touched))}}function ge(e,t){if(1&e&&(v.TgZ(0,"mat-error",38),v._uU(1),v.qZA()),2&e){var o=v.oxw().$implicit;v.xp6(1),v.hij(" ",o.message," ")}}function fe(e,t){if(1&e&&(v.TgZ(0,"mat-error"),v.YNc(1,ge,2,1,"mat-error",39),v.qZA()),2&e){var o=t.$implicit,r=v.oxw();v.xp6(1),v.Q6J("ngIf",r.customerDetailForm.get("telephone2").hasError(o.type)&&(r.customerDetailForm.get("telephone2").dirty||r.customerDetailForm.get("telephone2").touched))}}function he(e,t){if(1&e&&(v.TgZ(0,"mat-error",38),v._uU(1),v.qZA()),2&e){var o=v.oxw().$implicit;v.xp6(1),v.hij(" ",o.message," ")}}function Ze(e,t){if(1&e&&(v.TgZ(0,"mat-error"),v.YNc(1,he,2,1,"mat-error",39),v.qZA()),2&e){var o=t.$implicit,r=v.oxw();v.xp6(1),v.Q6J("ngIf",r.customerDetailForm.get("email1").hasError(o.type)&&(r.customerDetailForm.get("email1").dirty||r.customerDetailForm.get("email1").touched))}}function ye(e,t){if(1&e&&(v.TgZ(0,"mat-error",38),v._uU(1),v.qZA()),2&e){var o=v.oxw().$implicit;v.xp6(1),v.hij(" ",o.message," ")}}function ve(e,t){if(1&e&&(v.TgZ(0,"mat-error"),v.YNc(1,ye,2,1,"mat-error",37),v.qZA()),2&e){var o=t.$implicit,r=v.oxw();v.xp6(1),v.Q6J("ngIf",r.customerDetailForm.get("email2").hasError(o.type)&&(r.customerDetailForm.get("email2").dirty||r.customerDetailForm.get("email2").touched))}}function Ce(e,t){if(1&e&&(v.TgZ(0,"mat-error",38),v._uU(1),v.qZA()),2&e){var o=v.oxw().$implicit;v.xp6(1),v.hij(" ",o.message," ")}}function Te(e,t){if(1&e&&(v.TgZ(0,"mat-error"),v.YNc(1,Ce,2,1,"mat-error",37),v.qZA()),2&e){var o=t.$implicit,r=v.oxw();v.xp6(1),v.Q6J("ngIf",r.customerDetailForm.get("contactPhone").hasError(o.type)&&(r.customerDetailForm.get("contactPhone").dirty||r.customerDetailForm.get("contactPhone").touched))}}function be(e,t){if(1&e&&(v.TgZ(0,"mat-option",36),v._uU(1),v.qZA()),2&e){var o=t.$implicit;v.Q6J("value",o),v.xp6(1),v.hij(" ",o.description," ")}}function Ae(e,t){if(1&e){var o=v.EpF();v.TgZ(0,"div"),v.TgZ(1,"button",40),v.NdJ("click",function(){v.CHM(o);var e=v.oxw();return e.onSubmitCustomerDefail(e.customerDetailForm.value)}),v._uU(2,"Save"),v.qZA(),v.qZA()}if(2&e){var r=v.oxw();v.xp6(1),v.Q6J("disabled",!r.permission.isAdd)("disabled",0==r.customerDetailForm.valid)}}var _e=[{path:"",children:[{path:"customers",component:G},{path:"customer-form",component:function(){var t=function(t){r(a,t);var n=i(a);function a(t,o,r,i,u,s,c,m,l){var d;return e(this,a),(d=n.call(this,s)).formBuilder=t,d.customerService=o,d.predataService=r,d.countryService=i,d.dialog=u,d.router=s,d.activateRoute=c,d.matSnackbar=m,d._dateFormatPipe=l,d.validation_messages={name:[{type:"required",message:"Name is required"}],phone:[{type:"pattern",message:"Enter a valid phonenumber"}],email:[{type:"pattern",message:"Enter a valid email"}],clientType:[{type:"required",message:"Type is required"}],VATNo:[{type:"required",message:"VAT No is required"}]},d.customer=new K.v,d.isEdit="0",d}return o(a,[{key:"ngOnInit",value:function(){this.initForm();var e=this.session.getLoginSession();this.permission=e.group.groupPermission.filter(function(e){return e.pageID==f.o.customerFormPageID})[0],this.permission&&1==this.permission.isView?(this.checkModifyPermission(),this.loadPredata(),this.onLoadData()):h.C.showNotification("Permission Denied",f.o.warningNotify)}},{key:"initForm",value:function(){var e=new c.NI("",{validators:c.kI.compose([c.kI.required])}),t=new c.NI("",{validators:c.kI.compose([c.kI.required])});this.countryFrmController=new c.NI,this.clientType=new c.NI,this.customerDetailForm=this.formBuilder.group({name:e,nameKH:new c.NI,telephone1:new c.NI,telephone2:new c.NI,email1:new c.NI,email2:new c.NI,contactName:new c.NI,contactPhone:new c.NI,city:new c.NI,countryCode:new c.NI,country:this.countryFrmController,isCustomer:new c.NI,VATNo:t,clientType:this.clientType,streetNo:new c.NI,homeNo:new c.NI,address1:new c.NI,address2:new c.NI})}},{key:"onClick_new",value:function(){this.customer=new K.v}},{key:"onLoadData",value:function(){var e=this;console.log("object"),this.activateRoute.queryParams.subscribe(function(t){if(t.element){var o=JSON.parse(t.element);o&&"1"==o.isEdit&&(e.isEdit="1",0==e.permission.isUpdate&&(e.isModify=!1),e.customerService.findCustomerByID(o.ID).subscribe(function(t){if(console.log(t),t.status==g.G.success&&t.body.length>0){e.customer=t.body[0];var o=[];try{e.countryFrmController.setValue(e.countryList.filter(function(t){return t.description.toLowerCase()==e.customer.country.toLowerCase()})[0])}catch(r){console.log(r)}e.customer.customerType.forEach(function(e){console.log(e),1==e.isActive&&o.push(e.predataID)}),e.clientType.setValue(o)}}))}})}},{key:"onSubmitCustomerDefail",value:function(e){var t=this;this.getCustomerTypeSelected(),0!=new RegExp(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/).test(this.customer.email1)?this.dialog.open(y.K,{width:"270px",data:{message:"Are you sure ?",title:"Save"}}).afterClosed().subscribe(function(e){1==e&&t.customerService.addCustomers(t.customer).subscribe(function(e){e.status==g.G.success?(t.matSnackbar.open(e.body[0].toString(),e.status,{duration:3e3}),t.router.navigate(["/customers"])):t.matSnackbar.open(e.body[0].toString(),e.status,{duration:4e3})})}):this.matSnackbar.open("Validation","Invalid email",{duration:4e3})}},{key:"getCustomerTypeSelected",value:function(){var e=this,t=this.clientType.value;this.customer.customerType.length>0?(t.forEach(function(o){var r=e.customer.customerType.filter(function(e){return e.predataID==o});if(r.length>0){if(t.filter(function(e){return!r[0].predataID}).length>0){var n=new W;n.predataID=o,e.customer.customerType.push(n)}}else if(0==e.customer.customerType.filter(function(e){return e.predataID==o}).length){var i=new W;i.predataID=o,e.customer.customerType.push(i)}}),this.customer.customerType.forEach(function(e){e.isActive=0}),t.forEach(function(t){e.customer.customerType.filter(function(e){return e.predataID==t})[0].isActive=1})):t.forEach(function(t){var o=new W;o.isActive=1,o.predataID=t,e.customer.customerType.push(o)})}},{key:"onCheckboxCustomerChanged",value:function(e){this.customer.isCustomer=e.checked,e.checked?this.customerDetailForm.get("VATNo").setValidators(c.kI.required):this.customerDetailForm.get("VATNo").setValidators([])}},{key:"loadPredata",value:function(){var e=this;this.predataService.getPreDefinedsByCriterial(f.o.clientType).subscribe(function(t){t.status==g.G.success&&t.body.length>0&&(e.clientTypeList=t.body,e.clientType.setValue([87]),e.clientType.setValidators(c.kI.required))}),this.countryService.getListCountrys().subscribe(function(t){console.log(t),t.status==g.G.success&&(e.countryList=t.body,e.filteredCountry=e.countryFrmController.valueChanges.pipe((0,X.O)(""),(0,ee.U)(function(e){return"string"==typeof e?e:e?e.name:""}),(0,ee.U)(function(t){return t?e.onfilteredCountry(t):e.countryList.slice()})))})}},{key:"onfilteredCountry",value:function(e){return this.countryList.filter(function(t){return 1==t.description.toLowerCase().includes(e.toLowerCase())})}},{key:"displayCountry",value:function(e){return e?e.description:void 0}},{key:"onSelectionCountryChanged",value:function(e){e.option.value&&(this.countryResponse=e.option.value,this.customer.country=this.countryResponse.description,this.customer.countryCode=this.countryResponse.countryCode,this.customer.city=this.countryResponse.capital)}}]),a}(Z.H);return t.\u0275fac=function(e){return new(e||t)(v.Y36(c.qu),v.Y36(C.v),v.Y36(te.y),v.Y36(oe.T),v.Y36(b.uw),v.Y36(s.F0),v.Y36(s.gz),v.Y36(T.ux),v.Y36(re.E))},t.\u0275cmp=v.Xpm({type:t,selectors:[["app-customer-form"]],features:[v.qOj],decls:91,vars:35,consts:[[1,"main-content",3,"hidden"],[1,"container-fluid"],[3,"formGroup"],[1,"card","p-4"],["mat-icon-button","","aria-label","Example icon-button with a menu",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"disabled","click"],[1,"card-body"],[1,"m-2"],[1,"row"],[1,"col-sm-6"],["placeholder","Client Type","multiple","","required","",3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"row",3,"hidden"],["matInput","","placeholder","VAT No","formControlName","VATNo",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["matInput","","required","","placeholder","Name/Company","formControlName","name",3,"ngModel","ngModelChange"],["matInput","","placeholder","Name KH","formControlName","nameKH",3,"ngModel","ngModelChange"],["matInput","","pattern","^\\+?[0-9]{3}-?[0-9]{6,12}$","placeholder","Telephone 1","formControlName","telephone1",3,"ngModel","ngModelChange"],["matInput","","pattern","^\\+?[0-9]{3}-?[0-9]{6,12}$","value","000000000","placeholder","Telephone 2(optional)","formControlName","telephone2",3,"ngModel","ngModelChange"],[1,"example-full-width"],["matInput","","type","email","pattern","[^@\\s]+@[^@\\s]+","placeholder","Email","formControlName","email1",3,"ngModel","ngModelChange"],["matInput","","type","email","pattern","[^@\\s]+@[^@\\s]+","placeholder","Email (optional)","formControlName","email2",3,"ngModel","ngModelChange"],["matInput","","placeholder","Contact Name","formControlName","contactName",3,"ngModel","ngModelChange"],["matInput","","pattern","[0-9]","placeholder","Contact Phone","formControlName","contactPhone",3,"ngModel","ngModelChange"],["type","text","formControlName","country","placeholder","Country","matInput","",3,"matAutocomplete"],[3,"displayWith","optionSelected"],["autoCountry","matAutocomplete"],["matInput","","formControlName","countryCode","name","countryCode","id","countryCode","placeholder","Country Code",3,"ngModel","ngModelChange"],["matInput","","formControlName","city","name","city","id","city","placeholder","City",3,"ngModel","ngModelChange"],[1,"fullWidth"],["matInput","","formControlName","address1","placeholder","Address1",3,"ngModel","ngModelChange"],["matInput","","formControlName","address2","placeholder","Address2",3,"ngModel","ngModelChange"],[1,"col-sm-12","d-flex","justify-content-end"],["mat-raised-button","","routerLink","/customers","mat-stroked-button","",1,"btn","btn-default","btn-sm","mr-4"],[3,"value"],["class","error-message",4,"ngIf"],[1,"error-message"],["class","error-message","class","error-message",4,"ngIf"],["mat-raised-button","",1,"btn","btn-primary","btn-sm",3,"disabled","click"]],template:function(e,t){if(1&e&&(v.TgZ(0,"div",0),v.TgZ(1,"div",1),v.TgZ(2,"form",2),v.TgZ(3,"div",3),v.TgZ(4,"div"),v.TgZ(5,"div"),v._uU(6,"Customer"),v.qZA(),v.TgZ(7,"div"),v.TgZ(8,"button",4),v.TgZ(9,"mat-icon"),v._uU(10,"more_vert"),v.qZA(),v.qZA(),v.TgZ(11,"mat-menu",null,5),v.TgZ(13,"button",6),v.NdJ("click",function(){return t.onSubmitCustomerDefail(t.customerDetailForm.value)}),v.TgZ(14,"span"),v._uU(15,"Save"),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.TgZ(16,"div",7),v.TgZ(17,"div",8),v.TgZ(18,"div",9),v.TgZ(19,"div",10),v.TgZ(20,"mat-form-field"),v.TgZ(21,"mat-select",11),v.YNc(22,ae,2,2,"mat-option",12),v.qZA(),v.YNc(23,ue,2,0,"mat-error",13),v.qZA(),v.qZA(),v.qZA(),v.TgZ(24,"div",14),v.TgZ(25,"div",10),v.TgZ(26,"mat-form-field"),v.TgZ(27,"input",15),v.NdJ("ngModelChange",function(e){return t.customer.VATNo=e}),v.qZA(),v.YNc(28,ce,2,1,"mat-error",16),v.qZA(),v.qZA(),v.qZA(),v.TgZ(29,"div",9),v.TgZ(30,"div",10),v.TgZ(31,"mat-form-field"),v.TgZ(32,"input",17),v.NdJ("ngModelChange",function(e){return t.customer.name=e}),v.qZA(),v.YNc(33,le,2,1,"mat-error",16),v.qZA(),v.qZA(),v.TgZ(34,"div",10),v.TgZ(35,"mat-form-field"),v.TgZ(36,"input",18),v.NdJ("ngModelChange",function(e){return t.customer.nameKH=e}),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.TgZ(37,"div",9),v.TgZ(38,"div",10),v.TgZ(39,"mat-form-field"),v.TgZ(40,"input",19),v.NdJ("ngModelChange",function(e){return t.customer.telephone1=e}),v.qZA(),v.YNc(41,pe,2,1,"mat-error",16),v.qZA(),v.qZA(),v.TgZ(42,"div",10),v.TgZ(43,"mat-form-field"),v.TgZ(44,"input",20),v.NdJ("ngModelChange",function(e){return t.customer.telephone2=e}),v.qZA(),v.YNc(45,fe,2,1,"mat-error",16),v.qZA(),v.qZA(),v.qZA(),v.TgZ(46,"div",9),v.TgZ(47,"div",10),v.TgZ(48,"mat-form-field",21),v.TgZ(49,"input",22),v.NdJ("ngModelChange",function(e){return t.customer.email1=e}),v.qZA(),v.YNc(50,Ze,2,1,"mat-error",16),v.qZA(),v.qZA(),v.TgZ(51,"div",10),v.TgZ(52,"mat-form-field"),v.TgZ(53,"input",23),v.NdJ("ngModelChange",function(e){return t.customer.email2=e}),v.qZA(),v.YNc(54,ve,2,1,"mat-error",16),v.qZA(),v.qZA(),v.qZA(),v.TgZ(55,"div",9),v.TgZ(56,"div",10),v.TgZ(57,"mat-form-field"),v.TgZ(58,"input",24),v.NdJ("ngModelChange",function(e){return t.customer.contactName=e}),v.qZA(),v.qZA(),v.qZA(),v.TgZ(59,"div",10),v.TgZ(60,"mat-form-field"),v.TgZ(61,"input",25),v.NdJ("ngModelChange",function(e){return t.customer.contactPhone=e}),v.qZA(),v.YNc(62,Te,2,1,"mat-error",16),v.qZA(),v.qZA(),v.qZA(),v.TgZ(63,"div",9),v.TgZ(64,"div",10),v.TgZ(65,"mat-form-field"),v._UZ(66,"input",26),v.TgZ(67,"mat-autocomplete",27,28),v.NdJ("optionSelected",function(e){return t.onSelectionCountryChanged(e)}),v.YNc(69,be,2,2,"mat-option",12),v.ALo(70,"async"),v.qZA(),v.qZA(),v.qZA(),v.TgZ(71,"div",10),v.TgZ(72,"div",9),v.TgZ(73,"div",10),v.TgZ(74,"mat-form-field"),v.TgZ(75,"input",29),v.NdJ("ngModelChange",function(e){return t.customer.countryCode=e}),v.qZA(),v.qZA(),v.qZA(),v.TgZ(76,"div",10),v.TgZ(77,"mat-form-field"),v.TgZ(78,"input",30),v.NdJ("ngModelChange",function(e){return t.customer.city=e}),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.TgZ(79,"div",9),v.TgZ(80,"div",10),v.TgZ(81,"mat-form-field",31),v.TgZ(82,"textarea",32),v.NdJ("ngModelChange",function(e){return t.customer.address1=e}),v.qZA(),v.qZA(),v.qZA(),v.TgZ(83,"div",10),v.TgZ(84,"mat-form-field"),v.TgZ(85,"textarea",33),v.NdJ("ngModelChange",function(e){return t.customer.address2=e}),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.TgZ(86,"div",9),v.TgZ(87,"div",34),v.TgZ(88,"button",35),v._uU(89,"Cancel"),v.qZA(),v.YNc(90,Ae,3,2,"div",13),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA()),2&e){var o=v.MAs(12),r=v.MAs(68);v.Q6J("hidden",!t.permission.isView),v.xp6(2),v.Q6J("formGroup",t.customerDetailForm),v.xp6(6),v.Q6J("matMenuTriggerFor",o),v.xp6(5),v.Q6J("disabled",!t.permission.isAdd)("disabled",!t.customerDetailForm.valid),v.xp6(8),v.Q6J("formControl",t.clientType),v.xp6(1),v.Q6J("ngForOf",t.clientTypeList),v.xp6(1),v.Q6J("ngIf",t.clientType.hasError("required")),v.xp6(1),v.Q6J("hidden",!t.customer.isCustomer),v.xp6(3),v.Q6J("ngModel",t.customer.VATNo),v.xp6(1),v.Q6J("ngForOf",t.validation_messages.VATNo),v.xp6(4),v.Q6J("ngModel",t.customer.name),v.xp6(1),v.Q6J("ngForOf",t.validation_messages.name),v.xp6(3),v.Q6J("ngModel",t.customer.nameKH),v.xp6(4),v.Q6J("ngModel",t.customer.telephone1),v.xp6(1),v.Q6J("ngForOf",t.validation_messages.phone),v.xp6(3),v.Q6J("ngModel",t.customer.telephone2),v.xp6(1),v.Q6J("ngForOf",t.validation_messages.phone),v.xp6(4),v.Q6J("ngModel",t.customer.email1),v.xp6(1),v.Q6J("ngForOf",t.validation_messages.email),v.xp6(3),v.Q6J("ngModel",t.customer.email2),v.xp6(1),v.Q6J("ngForOf",t.validation_messages.email),v.xp6(4),v.Q6J("ngModel",t.customer.contactName),v.xp6(3),v.Q6J("ngModel",t.customer.contactPhone),v.xp6(1),v.Q6J("ngForOf",t.validation_messages.phone),v.xp6(4),v.Q6J("matAutocomplete",r),v.xp6(1),v.Q6J("displayWith",t.displayCountry),v.xp6(2),v.Q6J("ngForOf",v.lcZ(70,33,t.filteredCountry)),v.xp6(6),v.Q6J("ngModel",t.customer.countryCode),v.xp6(3),v.Q6J("ngModel",t.customer.city),v.xp6(4),v.Q6J("ngModel",t.customer.address1),v.xp6(3),v.Q6J("ngModel",t.customer.address2),v.xp6(5),v.Q6J("ngIf",t.isModify)}},directives:[c._Y,c.JL,c.sg,A.lW,_.p6,q.Hw,_.VK,_.OP,N.KE,ne.gD,c.Q7,c.JJ,c.oH,u.sg,u.O5,x.Nt,c.Fj,c.u,c.c5,ie.ZL,ie.XC,s.rH,I.ey,N.TO],pipes:[u.Ov],styles:[".customerDetailForm[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%}.fullWidth[_ngcontent-%COMP%]{width:100%}.group-reply[_ngcontent-%COMP%]{box-sizing:border-box;display:flex;padding:0!important}.btn[_ngcontent-%COMP%]{height:34px;margin-top:auto;background-color:#0bc6dd;color:#fff}"]}),t}()}]}],qe=function(){var t=function t(){e(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=v.oAB({type:t}),t.\u0275inj=v.cJS({imports:[[u.ez,s.Bz.forChild(_e),c.u5,c.UX,m.TW,l.vO,d.q]]}),t}()},72541:function(t,n,a){a.d(n,{v:function(){return p}});var u=a(65136),s=a(82327),c=a(927),m=a(37716),l=a(91841),d=a(39895),p=function(){var t=function(t){r(a,t);var n=i(a);function a(t,o){var r;return e(this,a),(r=n.call(this,o)).http=t,r}return o(a,[{key:"addCustomers",value:function(e){return this.http.post(s.V.addCustomers,e)}},{key:"getListCustomers",value:function(e,t){return this.http.post(s.V.getListCustomers,{pageIndex:e,pageSize:t})}},{key:"getCustomers",value:function(){return this.http.post(s.V.getListCustomers,{})}},{key:"getCustomerByType",value:function(e){return this.http.post(s.V.getCustomerByType,{customerType:e})}},{key:"removeCustomer",value:function(e){var t={customerID:e,userID:(new c.E).getUID()};return this.http.post(s.V.removeCustomer,t)}},{key:"getCountCustomers",value:function(){return this.http.post(s.V.getCountCustomers,{})}},{key:"findCustomerByID",value:function(e){return this.http.post(s.V.findCustomerByID,{customerID:e})}}]),a}(u.b);return t.\u0275fac=function(e){return new(e||t)(m.LFG(l.eN),m.LFG(d.F0))},t.\u0275prov=m.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},84934:function(e,t,o){o.d(t,{o:function(){return n}});var r,n=((r=n||(n={})).CKSNFILE="CKSNFILE",r.staff_position="staff_position",r.group_list="group_list",r.limit_file_upload="limit_file_upload",r.permission_page="permission_page",r.container_size="container_size",r.gw_unit_type="gw_unit_type",r.quantity_unit_type="quantity_unit_type",r.cbm_unit_type="cbm_unit_type",r.record_status="record_status",r.booking_mode="booking_mode",r.incoterm="incoterm",r.carrier="carrier",r.pod="pod",r.pol="pol",r.lcl="load_container_less",r.clientType="Client Type",r.border="border",r.operationgroup="1",r.tansportationgroup="2",r.brokergroup="3",r.seaPortType="1",r.driver="21",r.dem_due_warning="dem_due_warning",r.det_due_warning="det_due_warning",r[r.bookingsPageID=1]="bookingsPageID",r[r.bookingFormPageID=2]="bookingFormPageID",r[r.customersPageID=3]="customersPageID",r[r.customerFormPageID=4]="customerFormPageID",r[r.businessPageID=5]="businessPageID",r[r.businessFormPageID=6]="businessFormPageID",r[r.usersPageID=7]="usersPageID",r[r.userFormPageID=8]="userFormPageID",r[r.groupsPageID=9]="groupsPageID",r[r.groupFormPageID=10]="groupFormPageID",r[r.predataPageID=11]="predataPageID",r[r.predataFormPageID=12]="predataFormPageID",r[r.containerPageID=13]="containerPageID",r[r.department=14]="department",r[r.portSummary=15]="portSummary",r[r.portForm=16]="portForm",r[r.truckSummary=17]="truckSummary",r[r.truckForm=18]="truckForm",r[r.report=19]="report",r[r.dashboardID=20]="dashboardID",r[r.carrierID=21]="carrierID",r.billType="billType",r.warningNotify="warning",r.infoNotify="info",r.successNotify="success",r.dangerNotify="danger",r.roseNotify="rose",r.primaryNotify="primary",r[r.type_of_shipper_exporter_seller=84]="type_of_shipper_exporter_seller",r[r.type_of_consignee=85]="type_of_consignee",r[r.type_of_notify_party=86]="type_of_notify_party",r[r.type_of_customer=87]="type_of_customer",r[r.group_operation=1]="group_operation",r[r.group_transportation=2]="group_transportation",r[r.group_admin=5]="group_admin",r.containerStatus="containerStatus",r[r.containerStatus_DONE=93]="containerStatus_DONE",r.booking_status="booking_status",r[r.booking_status_new=36]="booking_status_new",r[r.booking_status_done=37]="booking_status_done",r[r.allValue=0]="allValue",r.all="All",r.multiDropStatus="MultiDropStatus",n)},37320:function(t,n,a){a.d(n,{y:function(){return p}});var u,s=a(65136),c=a(82327),m=a(37716),l=a(91841),d=a(39895),p=((u=function(t){r(a,t);var n=i(a);function a(t,o){var r;return e(this,a),(r=n.call(this,o)).http=t,r}return o(a,[{key:"getPreDefinedsByCriterial",value:function(e){return this.http.post(c.V.getPredataByCriterial,{criterial:e})}},{key:"addPreData",value:function(e){return this.http.post(c.V.addPreData,{predata:e})}},{key:"getListPredatas",value:function(e,t,o){return e||(e="all"),this.http.post(c.V.getListPredatas,{criterial:e,pageIndex:t,pageSize:o})}},{key:"getListCriterial",value:function(){return this.http.post(c.V.getListCriterial,{})}},{key:"getCountPredatas",value:function(e){return this.http.post(c.V.getCountPredatas,{criterial:e})}}]),a}(s.b)).\u0275fac=function(e){return new(e||u)(m.LFG(l.eN),m.LFG(d.F0))},u.\u0275prov=m.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u)},40355:function(e,t,o){o.d(t,{G:function(){return n}});var r,n=((r=n||(n={})).success="success",r.server_error="server_error",r.logic_error="logic_error",n)}}])}();